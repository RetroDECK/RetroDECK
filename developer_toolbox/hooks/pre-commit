#!/bin/bash
# A pre-commit hook to lint features.json if it is edited

# Check if any path contains 'features.json'
if git diff --cached --name-only | grep -q 'config/retrodeck/reference_lists/features.json'; then
  # Run the linting script
  echo "Linting config/retrodeck/reference_lists/features.json..."
  if ! bash developer_toolbox/lint_features.json.sh; then
    echo "Linting failed. Please fix the issues and try again."
    exit 1  # Exit with a non-zero status to block the commit
  fi
fi

# Continue with the commit if all checks passed
exit 0
